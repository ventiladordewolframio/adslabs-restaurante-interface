<h1>Clients List</h1>

<!-- Input for Client ID -->
<div>
    <label for="clientId">Enter Client ID:</label>
    <input type="number" [(ngModel)]="clientId" id="clientId" placeholder="Enter client ID" />
</div>
<!-- Modal Content (two fields for editing) -->
<div class="input-field" *ngIf="client">
    <label for="name">Edit Name:</label>
    <input type="text" [(ngModel)]="client.name" id="name" />
</div>

<div class="input-field" *ngIf="client">
    <label for="cpf">Edit CPF:</label>
    <input type="text" [(ngModel)]="client.cpf" id="cpf" />
</div>

<button (click)="fetchSingleClientData(clientId)">Fetch Single Client</button>
<button (click)="createSingleClientData()">Create Client</button>

<!-- Display the client data when fetched -->
<div *ngIf="client" class="container">
    <h3>Client Details</h3>
    <p><strong>ID:</strong> {{ client.id }}</p>
    <p><strong>Name:</strong> {{ client.name }}</p>
    <p><strong>CPF:</strong> {{ client.cpf }}</p>
    <p><strong>Created At:</strong> {{ client.createdAt }}</p>
    <p><strong>Updated At:</strong> {{ client.updatedAt }}</p>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button (click)="editSingleClientData(clientId)">Save</button>
        <button (click)="deleteSingleClientData(clientId)">Delete</button>
    </div>
</div>

<!-- Loading indicator (optional) -->
<div *ngIf="loading">Loading...</div>

<button (click)="fetchAllClientData()">Fetch All Clients</button>
<button (click)="fetchTop5ClientsByOrder()"> Fetch Top 5 Clients By Order</button>
<button (click)="fetchTop5ClientsByTotalSpent()">Fetch Top 5 Clients By Total Spent</button>

<!-- Loading indicator -->
<div *ngIf="loading">Loading...</div>

<!-- Table Container -->
<div *ngIf="clients && clients.length > 0; else noData" class="table">
    <div class="header">
        <div class="header-item">Actions</div>
        <div class="header-item">ID</div>
        <div class="header-item">Name</div>
        <div class="header-item">CPF</div>
        <div class="header-item">Total Spent</div>
        <div class="header-item">Total Quantity</div>
        <div class="header-item">Created At</div>
        <div class="header-item">Updated At</div>
    </div>

    <!-- Table Rows: Each client is displayed as a row -->
    <div *ngFor="let client of clients" class="row">
        <div class="action-buttons">
            <button (click)="deleteSingleClientData(client.id)">Delete</button>
            <button (click)="loadClientVariables(client.id, client.id, client.name, client.cpf)">Load</button>
        </div>

        <div class="row-item">{{ client.id || client.client.id }}</div>
        <div class="row-item">{{ client.name || client.client.name }}</div>
        <div class="row-item">{{ client.cpf || client.client.cpf }}</div>
        <div class="row-item">{{ client.totalSpent }}</div>
        <div class="row-item">{{ client.totalQuantity }}</div>
        <div class="row-item">{{ client.createdAt | date:'medium' }}</div>
        <div class="row-item">{{ client.updatedAt | date:'medium' }}</div>
    </div>
</div>

<!-- Template for when no data is found -->
<ng-template #noData>
    <div>No clients found.</div>
</ng-template>

<h1>Items List</h1>

<!-- Input for Client ID -->
<div>
    <label for="itemId">Enter item ID:</label>
    <input type="number" [(ngModel)]="itemId" id="itemId" placeholder="Enter item ID" />
</div>
<!-- Modal Content (two fields for editing) -->
<div class="input-field" *ngIf="item">
    <label for="name">Edit Name:</label>
    <input type="text" [(ngModel)]="item.name" id="name" />
</div>

<div class="input-field" *ngIf="item">
    <label for="price">Edit Price:</label>
    <input type="text" [(ngModel)]="item.price" id="price" />
</div>

<button (click)="fetchSingleItemData(itemId)">Fetch Single item</button>
<button (click)="createSingleItemData()">Create item</button>

<!-- Display the item data when fetched -->
<div *ngIf="item" class="container">
    <h3>item Details</h3>
    <p><strong>ID:</strong> {{ item.id }}</p>
    <p><strong>Name:</strong> {{ item.name }}</p>
    <p><strong>Price:</strong> {{ item.price }}</p>
    <p><strong>Created At:</strong> {{ item.createdAt }}</p>
    <p><strong>Updated At:</strong> {{ item.updatedAt }}</p>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button (click)="editSingleItemData(itemId)">Save</button>
        <button (click)="deleteSingleItemData(itemId)">Delete</button>
    </div>
</div>

<!-- Loading indicator (optional) -->
<div *ngIf="loading">Loading...</div>


<button (click)="fetchAllItemData()">Fetch All Items</button>

<!-- Loading indicator -->
<div *ngIf="loading">Loading...</div>

<!-- Table Container -->
<div *ngIf="items && items.length > 0; else noData" class="table">
    <div class="header">
        <div class="header-item">Actions</div>
        <div class="header-item">ID</div>
        <div class="header-item">Name</div>
        <div class="header-item">Price</div>
        <div class="header-item">Created At</div>
        <div class="header-item">Updated At</div>
    </div>

    <!-- Table Rows: Each client is displayed as a row -->
    <div *ngFor="let item of items" class="row">
        <div class="action-buttons">
            <button (click)="deleteSingleItemData(item.id)">Delete</button>
            <button (click)="loadItemVariables(item.id, item.id, item.name, item.price)">Load</button>
        </div>

        <div class="row-item">{{ item.id || item.item.id }}</div>
        <div class="row-item">{{ item.name || item.item.name }}</div>
        <div class="row-item">{{ item.price || item.item.price }}</div>
        <div class="row-item">{{ item.createdAt | date:'medium' }}</div>
        <div class="row-item">{{ item.updatedAt | date:'medium' }}</div>
    </div>
</div>

<!-- Template for when no data is found -->
<ng-template #noData>
    <div>No items found.</div>
</ng-template>